<ion-header>
  <ion-toolbar class="ion-padding-horizontal">
    <ion-buttons slot="start">
      <ion-icon src="assets/icon/avatar_parking.svg"></ion-icon>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <div class="segment ion-margin-top">
    <ion-segment #segment [(ngModel)]="type" mode="md" (ionChange)="segmentChanged($event)" value="entrance">
      <ion-segment-button value="entrance">
        <ion-label>Entrada</ion-label>
      </ion-segment-button>
      <ion-segment-button value="exit">
        <ion-label>Saída</ion-label>
      </ion-segment-button>
    </ion-segment>

    <div [ngSwitch]="type">
      <form [formGroup]="parkingForm">
        <ion-item *ngSwitchCase="'entrance'" lines="none" [ngClass]="{'is-invalid': submitted && form.carEnterPlate.errors}">
          <ion-label position="stacked" color="medium">Número da placa:</ion-label>
          <ion-input [(ngModel)]="carModel.carEnterPlate"
                     formControlName="carEnterPlate"
                     name="carEnterPlate"
                     simpleMask="999-9999"
                     type="text"
                     inputmode="text"
                     placeholder="AAA-0000"
                     class="text-input">
          </ion-input>
          <ion-button class="ion-margin-top largeButton"
                      expand="block"
                      disabled="{{ !carModel.carEnterPlate }}"
                      (click)="enter()">
            <ion-text color="secondary">CONFIRMAR ENTRADA</ion-text>
          </ion-button>
        </ion-item>

        <div *ngIf="submitted && form.carEnterPlate.errors" class="invalid-feedback">
          <div *ngIf="form.carEnterPlate.errors.required">é nescessário uma placa</div>
        </div>

        <ion-item *ngSwitchCase="'exit'" lines="none" [ngClass]="{'is-invalid': submitted && form.carExitPlate.errors}">
          <ion-label position="stacked" color="medium">Número da placa:</ion-label>
          <ion-input [(ngModel)]="carModel.carExitPlate"
                     formControlName="carExitPlate"
                     name="carExitPlate"
                     simpleMask="999-9999"
                     type="text"
                     inputmode="text"
                     placeholder="AAA-0000"
                     class="text-input">
          </ion-input>
          <ion-button class="ion-margin-top largeButton" expand="block" color="disable" (click)="payment()">
            <ion-text color="medium">PAGAMENTO</ion-text>
          </ion-button>

          <div *ngIf="submitted && form.carExitPlate.errors" class="invalid-feedback">
            <div *ngIf="form.carExitPlate.errors.required">Preencha seu e-mail.</div>
          </div>

          <ion-button class="ion-margin-top largeButton" expand="block" color="disable" fill="outline" (click)="exit()">
            <ion-text color="medium">SAÍDA</ion-text>
          </ion-button>
          <ion-button class="ion-margin-top largeButton" expand="block" color="primary" fill="clear" (click)="seeHistoric()">
            VER HISTÓRICO
          </ion-button>
        </ion-item>
      </form>
    </div>
  </div>



</ion-content>
